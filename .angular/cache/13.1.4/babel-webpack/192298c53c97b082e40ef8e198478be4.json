{"ast":null,"code":"\"use strict\";\n\nvar ɵngcc0 = require('@angular/core');\n\nvar ɵngcc1 = require('./lightbox-event.service');\n\nvar ɵngcc2 = require('ngx-filesaver');\n\nvar ɵngcc3 = require('@angular/platform-browser');\n\nvar _c0 = [\"outerContainer\"];\nvar _c1 = [\"container\"];\nvar _c2 = [\"leftArrow\"];\nvar _c3 = [\"rightArrow\"];\nvar _c4 = [\"navArrow\"];\nvar _c5 = [\"dataContainer\"];\nvar _c6 = [\"image\"];\nvar _c7 = [\"caption\"];\nvar _c8 = [\"number\"];\nvar _c9 = [\"lb-content\", \"\"];\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ngx_filesaver_1 = require(\"ngx-filesaver\");\n\nvar common_1 = require(\"@angular/common\");\n\nvar core_1 = require(\"@angular/core\");\n\nvar platform_browser_1 = require(\"@angular/platform-browser\");\n\nvar lightbox_event_service_1 = require(\"./lightbox-event.service\");\n\nvar LightboxComponent =\n/** @class */\nfunction () {\n  function LightboxComponent(_elemRef, _rendererRef, _lightboxEvent, _lightboxElem, _lightboxWindowRef, _fileSaverService, _sanitizer, _documentRef) {\n    var _this_1 = this;\n\n    this._elemRef = _elemRef;\n    this._rendererRef = _rendererRef;\n    this._lightboxEvent = _lightboxEvent;\n    this._lightboxElem = _lightboxElem;\n    this._lightboxWindowRef = _lightboxWindowRef;\n    this._fileSaverService = _fileSaverService;\n    this._sanitizer = _sanitizer;\n    this._documentRef = _documentRef; // initialize data\n\n    this.options = this.options || {};\n    this.album = this.album || [];\n    this.currentImageIndex = this.currentImageIndex || 0;\n    this._windowRef = this._lightboxWindowRef.nativeWindow; // control the interactive of the directive\n\n    this.ui = {\n      // control the appear of the reloader\n      // false: image has loaded completely and ready to be shown\n      // true: image is still loading\n      showReloader: true,\n      // control the appear of the nav arrow\n      // the arrowNav is the parent of both left and right arrow\n      // in some cases, the parent shows but the child does not show\n      showLeftArrow: false,\n      showRightArrow: false,\n      showArrowNav: false,\n      // control the appear of the zoom and rotate buttons\n      showZoomButton: false,\n      showRotateButton: false,\n      // control whether to show the\n      // page number or not\n      showPageNumber: false,\n      showCaption: false,\n      // control whether to show the download button or not\n      showDownloadButton: false,\n      classList: 'lightbox animation fadeIn'\n    };\n    this.content = {\n      pageNumber: ''\n    };\n    this._event = {};\n    this._lightboxElem = this._elemRef;\n    this._event.subscription = this._lightboxEvent.lightboxEvent$.subscribe(function (event) {\n      return _this_1._onReceivedEvent(event);\n    });\n    this.rotate = 0;\n  }\n\n  LightboxComponent.prototype.ngOnInit = function () {\n    var _this_1 = this;\n\n    this.album.forEach(function (album) {\n      if (album.caption) {\n        album.caption = _this_1._sanitizer.sanitize(core_1.SecurityContext.HTML, album.caption);\n      }\n    });\n  };\n\n  LightboxComponent.prototype.ngAfterViewInit = function () {\n    // need to init css value here, after the view ready\n    // actually these values are always 0\n    this._cssValue = {\n      containerTopPadding: Math.round(this._getCssStyleValue(this._containerElem, 'padding-top')),\n      containerRightPadding: Math.round(this._getCssStyleValue(this._containerElem, 'padding-right')),\n      containerBottomPadding: Math.round(this._getCssStyleValue(this._containerElem, 'padding-bottom')),\n      containerLeftPadding: Math.round(this._getCssStyleValue(this._containerElem, 'padding-left')),\n      imageBorderWidthTop: Math.round(this._getCssStyleValue(this._imageElem, 'border-top-width')),\n      imageBorderWidthBottom: Math.round(this._getCssStyleValue(this._imageElem, 'border-bottom-width')),\n      imageBorderWidthLeft: Math.round(this._getCssStyleValue(this._imageElem, 'border-left-width')),\n      imageBorderWidthRight: Math.round(this._getCssStyleValue(this._imageElem, 'border-right-width'))\n    };\n\n    if (this._validateInputData()) {\n      this._prepareComponent();\n\n      this._registerImageLoadingEvent();\n    }\n  };\n\n  LightboxComponent.prototype.ngOnDestroy = function () {\n    if (!this.options.disableKeyboardNav) {\n      // unbind keyboard event\n      this._disableKeyboardNav();\n    }\n\n    this._event.subscription.unsubscribe();\n  };\n\n  LightboxComponent.prototype.close = function ($event) {\n    $event.stopPropagation();\n\n    if ($event.target.classList.contains('lightbox') || $event.target.classList.contains('lb-loader') || $event.target.classList.contains('lb-close')) {\n      this._lightboxEvent.broadcastLightboxEvent({\n        id: lightbox_event_service_1.LIGHTBOX_EVENT.CLOSE,\n        data: null\n      });\n    }\n  };\n\n  LightboxComponent.prototype.download = function ($event) {\n    $event.stopPropagation();\n    var url = this.album[this.currentImageIndex].src;\n    var parts = url.split('/');\n    var fileName = parts[parts.length - 1];\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext('2d');\n    var preloader = new Image();\n\n    var _this = this;\n\n    preloader.onload = function () {\n      // @ts-ignore\n      canvas.width = this.naturalWidth; // @ts-ignore\n\n      canvas.height = this.naturalHeight; // @ts-ignore\n\n      ctx.drawImage(this, 0, 0);\n      canvas.toBlob(function (blob) {\n        _this._fileSaverService.save(blob, fileName);\n      }, 'image/jpeg', 0.75);\n    };\n\n    preloader.crossOrigin = '';\n    preloader.src = this._sanitizer.sanitize(core_1.SecurityContext.URL, url);\n  };\n\n  LightboxComponent.prototype.control = function ($event) {\n    $event.stopPropagation();\n    var height;\n    var width;\n\n    if ($event.target.classList.contains('lb-turnLeft')) {\n      this.rotate = this.rotate - 90;\n\n      this._rotateContainer();\n\n      this._calcTransformPoint();\n\n      this._documentRef.getElementById('image').style.transform = \"rotate(\" + this.rotate + \"deg)\";\n      this._documentRef.getElementById('image').style.webkitTransform = \"rotate(\" + this.rotate + \"deg)\";\n\n      this._lightboxEvent.broadcastLightboxEvent({\n        id: lightbox_event_service_1.LIGHTBOX_EVENT.ROTATE_LEFT,\n        data: null\n      });\n    } else if ($event.target.classList.contains('lb-turnRight')) {\n      this.rotate = this.rotate + 90;\n\n      this._rotateContainer();\n\n      this._calcTransformPoint();\n\n      this._documentRef.getElementById('image').style.transform = \"rotate(\" + this.rotate + \"deg)\";\n      this._documentRef.getElementById('image').style.webkitTransform = \"rotate(\" + this.rotate + \"deg)\";\n\n      this._lightboxEvent.broadcastLightboxEvent({\n        id: lightbox_event_service_1.LIGHTBOX_EVENT.ROTATE_RIGHT,\n        data: null\n      });\n    } else if ($event.target.classList.contains('lb-zoomOut')) {\n      height = parseInt(this._documentRef.getElementById('outerContainer').style.height, 10) / 1.5;\n      width = parseInt(this._documentRef.getElementById('outerContainer').style.width, 10) / 1.5;\n      this._documentRef.getElementById('outerContainer').style.height = height + 'px';\n      this._documentRef.getElementById('outerContainer').style.width = width + 'px';\n      height = parseInt(this._documentRef.getElementById('image').style.height, 10) / 1.5;\n      width = parseInt(this._documentRef.getElementById('image').style.width, 10) / 1.5;\n      this._documentRef.getElementById('image').style.height = height + 'px';\n      this._documentRef.getElementById('image').style.width = width + 'px';\n\n      this._lightboxEvent.broadcastLightboxEvent({\n        id: lightbox_event_service_1.LIGHTBOX_EVENT.ZOOM_OUT,\n        data: null\n      });\n    } else if ($event.target.classList.contains('lb-zoomIn')) {\n      height = parseInt(this._documentRef.getElementById('outerContainer').style.height, 10) * 1.5;\n      width = parseInt(this._documentRef.getElementById('outerContainer').style.width, 10) * 1.5;\n      this._documentRef.getElementById('outerContainer').style.height = height + 'px';\n      this._documentRef.getElementById('outerContainer').style.width = width + 'px';\n      height = parseInt(this._documentRef.getElementById('image').style.height, 10) * 1.5;\n      width = parseInt(this._documentRef.getElementById('image').style.width, 10) * 1.5;\n      this._documentRef.getElementById('image').style.height = height + 'px';\n      this._documentRef.getElementById('image').style.width = width + 'px';\n\n      this._lightboxEvent.broadcastLightboxEvent({\n        id: lightbox_event_service_1.LIGHTBOX_EVENT.ZOOM_IN,\n        data: null\n      });\n    }\n  };\n\n  LightboxComponent.prototype._rotateContainer = function () {\n    var temp = this.rotate;\n\n    if (temp < 0) {\n      temp *= -1;\n    }\n\n    if (temp / 90 % 4 === 1 || temp / 90 % 4 === 3) {\n      this._documentRef.getElementById('outerContainer').style.height = this._documentRef.getElementById('image').style.width;\n      this._documentRef.getElementById('outerContainer').style.width = this._documentRef.getElementById('image').style.height;\n      this._documentRef.getElementById('container').style.height = this._documentRef.getElementById('image').style.width;\n      this._documentRef.getElementById('container').style.width = this._documentRef.getElementById('image').style.height;\n    } else {\n      this._documentRef.getElementById('outerContainer').style.height = this._documentRef.getElementById('image').style.height;\n      this._documentRef.getElementById('outerContainer').style.width = this._documentRef.getElementById('image').style.width;\n      this._documentRef.getElementById('container').style.height = this._documentRef.getElementById('image').style.width;\n      this._documentRef.getElementById('container').style.width = this._documentRef.getElementById('image').style.height;\n    }\n  };\n\n  LightboxComponent.prototype._resetImage = function () {\n    this.rotate = 0;\n    this._documentRef.getElementById('image').style.transform = \"rotate(\" + this.rotate + \"deg)\";\n    this._documentRef.getElementById('image').style.webkitTransform = \"rotate(\" + this.rotate + \"deg)\";\n  };\n\n  LightboxComponent.prototype._calcTransformPoint = function () {\n    var height = parseInt(this._documentRef.getElementById('image').style.height, 10);\n    var width = parseInt(this._documentRef.getElementById('image').style.width, 10);\n    var temp = this.rotate % 360;\n\n    if (temp < 0) {\n      temp = 360 + temp;\n    }\n\n    if (temp === 90) {\n      this._documentRef.getElementById('image').style.transformOrigin = height / 2 + 'px ' + height / 2 + 'px';\n    } else if (temp === 180) {\n      this._documentRef.getElementById('image').style.transformOrigin = width / 2 + 'px ' + height / 2 + 'px';\n    } else if (temp === 270) {\n      this._documentRef.getElementById('image').style.transformOrigin = width / 2 + 'px ' + width / 2 + 'px';\n    }\n  };\n\n  LightboxComponent.prototype.nextImage = function () {\n    if (this.album.length === 1) {\n      return;\n    } else if (this.currentImageIndex === this.album.length - 1) {\n      this._changeImage(0);\n    } else {\n      this._changeImage(this.currentImageIndex + 1);\n    }\n  };\n\n  LightboxComponent.prototype.prevImage = function () {\n    if (this.album.length === 1) {\n      return;\n    } else if (this.currentImageIndex === 0 && this.album.length > 1) {\n      this._changeImage(this.album.length - 1);\n    } else {\n      this._changeImage(this.currentImageIndex - 1);\n    }\n  };\n\n  LightboxComponent.prototype._validateInputData = function () {\n    if (this.album && this.album instanceof Array && this.album.length > 0) {\n      for (var i = 0; i < this.album.length; i++) {\n        // check whether each _nside\n        // album has src data or not\n        if (this.album[i].src) {\n          continue;\n        }\n\n        throw new Error('One of the album data does not have source data');\n      }\n    } else {\n      throw new Error('No album data or album data is not correct in type');\n    } // to prevent data understand as string\n    // convert it to number\n\n\n    if (isNaN(this.currentImageIndex)) {\n      throw new Error('Current image index is not a number');\n    } else {\n      this.currentImageIndex = Number(this.currentImageIndex);\n    }\n\n    return true;\n  };\n\n  LightboxComponent.prototype._registerImageLoadingEvent = function () {\n    var _this_1 = this;\n\n    var preloader = new Image();\n\n    preloader.onload = function () {\n      _this_1._onLoadImageSuccess();\n    };\n\n    var src = this.album[this.currentImageIndex].src;\n    preloader.src = this._sanitizer.sanitize(core_1.SecurityContext.URL, src);\n  };\n  /**\n   * Fire when the image is loaded\n   */\n\n\n  LightboxComponent.prototype._onLoadImageSuccess = function () {\n    if (!this.options.disableKeyboardNav) {\n      // unbind keyboard event during transition\n      this._disableKeyboardNav();\n    }\n\n    var imageHeight;\n    var imageWidth;\n    var maxImageHeight;\n    var maxImageWidth;\n    var windowHeight;\n    var windowWidth;\n    var naturalImageWidth;\n    var naturalImageHeight; // set default width and height of image to be its natural\n\n    imageWidth = naturalImageWidth = this._imageElem.nativeElement.naturalWidth;\n    imageHeight = naturalImageHeight = this._imageElem.nativeElement.naturalHeight;\n\n    if (this.options.fitImageInViewPort) {\n      windowWidth = this._windowRef.innerWidth;\n      windowHeight = this._windowRef.innerHeight;\n      maxImageWidth = windowWidth - this._cssValue.containerLeftPadding - this._cssValue.containerRightPadding - this._cssValue.imageBorderWidthLeft - this._cssValue.imageBorderWidthRight - 20;\n      maxImageHeight = windowHeight - this._cssValue.containerTopPadding - this._cssValue.containerTopPadding - this._cssValue.imageBorderWidthTop - this._cssValue.imageBorderWidthBottom - 120;\n\n      if (naturalImageWidth > maxImageWidth || naturalImageHeight > maxImageHeight) {\n        if (naturalImageWidth / maxImageWidth > naturalImageHeight / maxImageHeight) {\n          imageWidth = maxImageWidth;\n          imageHeight = Math.round(naturalImageHeight / (naturalImageWidth / imageWidth));\n        } else {\n          imageHeight = maxImageHeight;\n          imageWidth = Math.round(naturalImageWidth / (naturalImageHeight / imageHeight));\n        }\n      }\n\n      this._rendererRef.setStyle(this._imageElem.nativeElement, 'width', imageWidth + \"px\");\n\n      this._rendererRef.setStyle(this._imageElem.nativeElement, 'height', imageHeight + \"px\");\n    }\n\n    this._sizeContainer(imageWidth, imageHeight);\n\n    if (this.options.centerVertically) {\n      this._centerVertically(imageWidth, imageHeight);\n    }\n  };\n\n  LightboxComponent.prototype._centerVertically = function (imageWidth, imageHeight) {\n    var scrollOffset = this._documentRef.documentElement.scrollTop;\n    var windowHeight = this._windowRef.innerHeight;\n    var viewOffset = windowHeight / 2 - imageHeight / 2;\n    var topDistance = scrollOffset + viewOffset;\n\n    this._rendererRef.setStyle(this._lightboxElem.nativeElement, 'top', topDistance + \"px\");\n  };\n\n  LightboxComponent.prototype._sizeContainer = function (imageWidth, imageHeight) {\n    var _this_1 = this;\n\n    var oldWidth = this._outerContainerElem.nativeElement.offsetWidth;\n    var oldHeight = this._outerContainerElem.nativeElement.offsetHeight;\n    var newWidth = imageWidth + this._cssValue.containerRightPadding + this._cssValue.containerLeftPadding + this._cssValue.imageBorderWidthLeft + this._cssValue.imageBorderWidthRight;\n    var newHeight = imageHeight + this._cssValue.containerTopPadding + this._cssValue.containerBottomPadding + this._cssValue.imageBorderWidthTop + this._cssValue.imageBorderWidthBottom; // make sure that distances are large enough for transitionend event to be fired, at least 5px.\n\n    if (Math.abs(oldWidth - newWidth) + Math.abs(oldHeight - newHeight) > 5) {\n      this._rendererRef.setStyle(this._outerContainerElem.nativeElement, 'width', newWidth + \"px\");\n\n      this._rendererRef.setStyle(this._outerContainerElem.nativeElement, 'height', newHeight + \"px\"); // bind resize event to outer container\n      // use enableTransition to prevent infinite loader\n\n\n      if (this.options.enableTransition) {\n        this._event.transitions = [];\n        ['transitionend', 'webkitTransitionEnd', 'oTransitionEnd', 'MSTransitionEnd'].forEach(function (eventName) {\n          _this_1._event.transitions.push(_this_1._rendererRef.listen(_this_1._outerContainerElem.nativeElement, eventName, function (event) {\n            if (event.target === event.currentTarget) {\n              _this_1._postResize(newWidth, newHeight);\n            }\n          }));\n        });\n      } else {\n        this._postResize(newWidth, newHeight);\n      }\n    } else {\n      this._postResize(newWidth, newHeight);\n    }\n  };\n\n  LightboxComponent.prototype._postResize = function (newWidth, newHeight) {\n    // unbind resize event\n    if (Array.isArray(this._event.transitions)) {\n      this._event.transitions.forEach(function (eventHandler) {\n        eventHandler();\n      });\n\n      this._event.transitions = [];\n    }\n\n    this._rendererRef.setStyle(this._dataContainerElem.nativeElement, 'width', newWidth + \"px\");\n\n    this._showImage();\n  };\n\n  LightboxComponent.prototype._showImage = function () {\n    this.ui.showReloader = false;\n\n    this._updateNav();\n\n    this._updateDetails();\n\n    if (!this.options.disableKeyboardNav) {\n      this._enableKeyboardNav();\n    }\n  };\n\n  LightboxComponent.prototype._prepareComponent = function () {\n    var _this_1 = this; // add css3 animation\n\n\n    this._addCssAnimation(); // position the image according to user's option\n\n\n    this._positionLightBox(); // update controls visibility on next view generation\n\n\n    setTimeout(function () {\n      _this_1.ui.showZoomButton = _this_1.options.showZoom;\n      _this_1.ui.showRotateButton = _this_1.options.showRotate;\n      _this_1.ui.showDownloadButton = _this_1.options.showDownloadButton;\n    }, 0);\n  };\n\n  LightboxComponent.prototype._positionLightBox = function () {\n    // @see https://stackoverflow.com/questions/3464876/javascript-get-window-x-y-position-for-scroll\n    var top = (this._windowRef.pageYOffset || this._documentRef.documentElement.scrollTop) + this.options.positionFromTop;\n    var left = this._windowRef.pageXOffset || this._documentRef.documentElement.scrollLeft;\n\n    if (!this.options.centerVertically) {\n      this._rendererRef.setStyle(this._lightboxElem.nativeElement, 'top', top + \"px\");\n    }\n\n    this._rendererRef.setStyle(this._lightboxElem.nativeElement, 'left', left + \"px\");\n\n    this._rendererRef.setStyle(this._lightboxElem.nativeElement, 'display', 'block'); // disable scrolling of the page while open\n\n\n    if (this.options.disableScrolling) {\n      this._rendererRef.addClass(this._documentRef.documentElement, 'lb-disable-scrolling');\n    }\n  };\n  /**\n   * addCssAnimation add css3 classes for animate lightbox\n   */\n\n\n  LightboxComponent.prototype._addCssAnimation = function () {\n    var resizeDuration = this.options.resizeDuration;\n    var fadeDuration = this.options.fadeDuration;\n\n    this._rendererRef.setStyle(this._lightboxElem.nativeElement, '-webkit-animation-duration', fadeDuration + \"s\");\n\n    this._rendererRef.setStyle(this._lightboxElem.nativeElement, 'animation-duration', fadeDuration + \"s\");\n\n    this._rendererRef.setStyle(this._outerContainerElem.nativeElement, '-webkit-transition-duration', resizeDuration + \"s\");\n\n    this._rendererRef.setStyle(this._outerContainerElem.nativeElement, 'transition-duration', resizeDuration + \"s\");\n\n    this._rendererRef.setStyle(this._dataContainerElem.nativeElement, '-webkit-animation-duration', fadeDuration + \"s\");\n\n    this._rendererRef.setStyle(this._dataContainerElem.nativeElement, 'animation-duration', fadeDuration + \"s\");\n\n    this._rendererRef.setStyle(this._imageElem.nativeElement, '-webkit-animation-duration', fadeDuration + \"s\");\n\n    this._rendererRef.setStyle(this._imageElem.nativeElement, 'animation-duration', fadeDuration + \"s\");\n\n    this._rendererRef.setStyle(this._captionElem.nativeElement, '-webkit-animation-duration', fadeDuration + \"s\");\n\n    this._rendererRef.setStyle(this._captionElem.nativeElement, 'animation-duration', fadeDuration + \"s\");\n\n    this._rendererRef.setStyle(this._numberElem.nativeElement, '-webkit-animation-duration', fadeDuration + \"s\");\n\n    this._rendererRef.setStyle(this._numberElem.nativeElement, 'animation-duration', fadeDuration + \"s\");\n  };\n\n  LightboxComponent.prototype._end = function () {\n    var _this_1 = this;\n\n    this.ui.classList = 'lightbox animation fadeOut';\n\n    if (this.options.disableScrolling) {\n      this._rendererRef.removeClass(this._documentRef.documentElement, 'lb-disable-scrolling');\n    }\n\n    setTimeout(function () {\n      _this_1.cmpRef.destroy();\n    }, this.options.fadeDuration * 1000);\n  };\n\n  LightboxComponent.prototype._updateDetails = function () {\n    // update the caption\n    if (typeof this.album[this.currentImageIndex].caption !== 'undefined' && this.album[this.currentImageIndex].caption !== '') {\n      this.ui.showCaption = true;\n    } // update the page number if user choose to do so\n    // does not perform numbering the page if the\n    // array length in album <= 1\n\n\n    if (this.album.length > 1 && this.options.showImageNumberLabel) {\n      this.ui.showPageNumber = true;\n      this.content.pageNumber = this._albumLabel();\n    }\n  };\n\n  LightboxComponent.prototype._albumLabel = function () {\n    // due to {this.currentImageIndex} is set from 0 to {this.album.length} - 1\n    return this.options.albumLabel.replace(/%1/g, Number(this.currentImageIndex + 1)).replace(/%2/g, this.album.length);\n  };\n\n  LightboxComponent.prototype._changeImage = function (newIndex) {\n    this._resetImage();\n\n    this.currentImageIndex = newIndex;\n\n    this._hideImage();\n\n    this._registerImageLoadingEvent();\n\n    this._lightboxEvent.broadcastLightboxEvent({\n      id: lightbox_event_service_1.LIGHTBOX_EVENT.CHANGE_PAGE,\n      data: newIndex\n    });\n  };\n\n  LightboxComponent.prototype._hideImage = function () {\n    this.ui.showReloader = true;\n    this.ui.showArrowNav = false;\n    this.ui.showLeftArrow = false;\n    this.ui.showRightArrow = false;\n    this.ui.showPageNumber = false;\n    this.ui.showCaption = false;\n  };\n\n  LightboxComponent.prototype._updateNav = function () {\n    var alwaysShowNav = false; // check to see the browser support touch event\n\n    try {\n      this._documentRef.createEvent('TouchEvent');\n\n      alwaysShowNav = this.options.alwaysShowNavOnTouchDevices ? true : false;\n    } catch (e) {// noop\n    } // initially show the arrow nav\n    // which is the parent of both left and right nav\n\n\n    this._showArrowNav();\n\n    if (this.album.length > 1) {\n      if (this.options.wrapAround) {\n        if (alwaysShowNav) {\n          // alternatives this.$lightbox.find('.lb-prev, .lb-next').css('opacity', '1');\n          this._rendererRef.setStyle(this._leftArrowElem.nativeElement, 'opacity', '1');\n\n          this._rendererRef.setStyle(this._rightArrowElem.nativeElement, 'opacity', '1');\n        } // alternatives this.$lightbox.find('.lb-prev, .lb-next').show();\n\n\n        this._showLeftArrowNav();\n\n        this._showRightArrowNav();\n      } else {\n        if (this.currentImageIndex > 0) {\n          // alternatives this.$lightbox.find('.lb-prev').show();\n          this._showLeftArrowNav();\n\n          if (alwaysShowNav) {\n            // alternatives this.$lightbox.find('.lb-prev').css('opacity', '1');\n            this._rendererRef.setStyle(this._leftArrowElem.nativeElement, 'opacity', '1');\n          }\n        }\n\n        if (this.currentImageIndex < this.album.length - 1) {\n          // alternatives this.$lightbox.find('.lb-next').show();\n          this._showRightArrowNav();\n\n          if (alwaysShowNav) {\n            // alternatives this.$lightbox.find('.lb-next').css('opacity', '1');\n            this._rendererRef.setStyle(this._rightArrowElem.nativeElement, 'opacity', '1');\n          }\n        }\n      }\n    }\n  };\n\n  LightboxComponent.prototype._showLeftArrowNav = function () {\n    this.ui.showLeftArrow = true;\n  };\n\n  LightboxComponent.prototype._showRightArrowNav = function () {\n    this.ui.showRightArrow = true;\n  };\n\n  LightboxComponent.prototype._showArrowNav = function () {\n    this.ui.showArrowNav = this.album.length !== 1;\n  };\n\n  LightboxComponent.prototype._enableKeyboardNav = function () {\n    var _this_1 = this;\n\n    this._event.keyup = this._rendererRef.listen('document', 'keyup', function (event) {\n      _this_1._keyboardAction(event);\n    });\n  };\n\n  LightboxComponent.prototype._disableKeyboardNav = function () {\n    if (this._event.keyup) {\n      this._event.keyup();\n    }\n  };\n\n  LightboxComponent.prototype._keyboardAction = function ($event) {\n    var KEYCODE_ESC = 27;\n    var KEYCODE_LEFTARROW = 37;\n    var KEYCODE_RIGHTARROW = 39;\n    var keycode = $event.keyCode;\n    var key = String.fromCharCode(keycode).toLowerCase();\n\n    if (keycode === KEYCODE_ESC || key.match(/x|o|c/)) {\n      this._lightboxEvent.broadcastLightboxEvent({\n        id: lightbox_event_service_1.LIGHTBOX_EVENT.CLOSE,\n        data: null\n      });\n    } else if (key === 'p' || keycode === KEYCODE_LEFTARROW) {\n      if (this.currentImageIndex !== 0) {\n        this._changeImage(this.currentImageIndex - 1);\n      } else if (this.options.wrapAround && this.album.length > 1) {\n        this._changeImage(this.album.length - 1);\n      }\n    } else if (key === 'n' || keycode === KEYCODE_RIGHTARROW) {\n      if (this.currentImageIndex !== this.album.length - 1) {\n        this._changeImage(this.currentImageIndex + 1);\n      } else if (this.options.wrapAround && this.album.length > 1) {\n        this._changeImage(0);\n      }\n    }\n  };\n\n  LightboxComponent.prototype._getCssStyleValue = function (elem, propertyName) {\n    return parseFloat(this._windowRef.getComputedStyle(elem.nativeElement, null).getPropertyValue(propertyName));\n  };\n\n  LightboxComponent.prototype._onReceivedEvent = function (event) {\n    switch (event.id) {\n      case lightbox_event_service_1.LIGHTBOX_EVENT.CLOSE:\n        this._end();\n\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  __decorate([core_1.Input(), __metadata(\"design:type\", Array)], LightboxComponent.prototype, \"album\", void 0);\n\n  __decorate([core_1.Input(), __metadata(\"design:type\", Number)], LightboxComponent.prototype, \"currentImageIndex\", void 0);\n\n  __decorate([core_1.Input(), __metadata(\"design:type\", Object)], LightboxComponent.prototype, \"options\", void 0);\n\n  __decorate([core_1.Input(), __metadata(\"design:type\", Object)], LightboxComponent.prototype, \"cmpRef\", void 0);\n\n  __decorate([core_1.ViewChild('outerContainer', {\n    static: false\n  }), __metadata(\"design:type\", core_1.ElementRef)], LightboxComponent.prototype, \"_outerContainerElem\", void 0);\n\n  __decorate([core_1.ViewChild('container', {\n    static: false\n  }), __metadata(\"design:type\", core_1.ElementRef)], LightboxComponent.prototype, \"_containerElem\", void 0);\n\n  __decorate([core_1.ViewChild('leftArrow', {\n    static: false\n  }), __metadata(\"design:type\", core_1.ElementRef)], LightboxComponent.prototype, \"_leftArrowElem\", void 0);\n\n  __decorate([core_1.ViewChild('rightArrow', {\n    static: false\n  }), __metadata(\"design:type\", core_1.ElementRef)], LightboxComponent.prototype, \"_rightArrowElem\", void 0);\n\n  __decorate([core_1.ViewChild('navArrow', {\n    static: false\n  }), __metadata(\"design:type\", core_1.ElementRef)], LightboxComponent.prototype, \"_navArrowElem\", void 0);\n\n  __decorate([core_1.ViewChild('dataContainer', {\n    static: false\n  }), __metadata(\"design:type\", core_1.ElementRef)], LightboxComponent.prototype, \"_dataContainerElem\", void 0);\n\n  __decorate([core_1.ViewChild('image', {\n    static: false\n  }), __metadata(\"design:type\", core_1.ElementRef)], LightboxComponent.prototype, \"_imageElem\", void 0);\n\n  __decorate([core_1.ViewChild('caption', {\n    static: false\n  }), __metadata(\"design:type\", core_1.ElementRef)], LightboxComponent.prototype, \"_captionElem\", void 0);\n\n  __decorate([core_1.ViewChild('number', {\n    static: false\n  }), __metadata(\"design:type\", core_1.ElementRef)], LightboxComponent.prototype, \"_numberElem\", void 0);\n\n  LightboxComponent = __decorate([__param(7, core_1.Inject(common_1.DOCUMENT)), __metadata(\"design:paramtypes\", [core_1.ElementRef, core_1.Renderer2, lightbox_event_service_1.LightboxEvent, core_1.ElementRef, lightbox_event_service_1.LightboxWindowRef, ngx_filesaver_1.FileSaverService, platform_browser_1.DomSanitizer, Object])], LightboxComponent);\n\n  LightboxComponent.ɵfac = function LightboxComponent_Factory(t) {\n    return new (t || LightboxComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LightboxEvent), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.LightboxWindowRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.FileSaverService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.DomSanitizer), ɵngcc0.ɵɵdirectiveInject(common_1.DOCUMENT));\n  };\n\n  LightboxComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: LightboxComponent,\n    selectors: [[\"\", \"lb-content\", \"\"]],\n    viewQuery: function LightboxComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c0, 5);\n        ɵngcc0.ɵɵviewQuery(_c1, 5);\n        ɵngcc0.ɵɵviewQuery(_c2, 5);\n        ɵngcc0.ɵɵviewQuery(_c3, 5);\n        ɵngcc0.ɵɵviewQuery(_c4, 5);\n        ɵngcc0.ɵɵviewQuery(_c5, 5);\n        ɵngcc0.ɵɵviewQuery(_c6, 5);\n        ɵngcc0.ɵɵviewQuery(_c7, 5);\n        ɵngcc0.ɵɵviewQuery(_c8, 5);\n      }\n\n      if (rf & 2) {\n        var _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._outerContainerElem = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._containerElem = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._leftArrowElem = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._rightArrowElem = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._navArrowElem = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._dataContainerElem = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._imageElem = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._captionElem = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._numberElem = _t.first);\n      }\n    },\n    hostVars: 2,\n    hostBindings: function LightboxComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function LightboxComponent_click_HostBindingHandler($event) {\n          return ctx.close($event);\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassMap(ctx.ui.classList);\n      }\n    },\n    inputs: {\n      options: \"options\",\n      album: \"album\",\n      currentImageIndex: \"currentImageIndex\",\n      cmpRef: \"cmpRef\"\n    },\n    attrs: _c9,\n    decls: 34,\n    vars: 14,\n    consts: [[\"id\", \"outerContainer\", 1, \"lb-outerContainer\", \"transition\"], [\"outerContainer\", \"\"], [\"id\", \"container\", 1, \"lb-container\"], [\"container\", \"\"], [\"id\", \"image\", 1, \"lb-image\", \"animation\", \"fadeIn\", 3, \"src\", \"hidden\"], [\"image\", \"\"], [1, \"lb-nav\", 3, \"hidden\"], [\"navArrow\", \"\"], [1, \"lb-prev\", 3, \"hidden\", \"click\"], [\"leftArrow\", \"\"], [1, \"lb-next\", 3, \"hidden\", \"click\"], [\"rightArrow\", \"\"], [1, \"lb-loader\", 3, \"hidden\", \"click\"], [1, \"lb-cancel\"], [1, \"lb-dataContainer\", 3, \"hidden\"], [\"dataContainer\", \"\"], [1, \"lb-data\"], [1, \"lb-details\"], [1, \"lb-caption\", \"animation\", \"fadeIn\", 3, \"hidden\", \"innerHtml\"], [\"caption\", \"\"], [1, \"lb-number\", \"animation\", \"fadeIn\", 3, \"hidden\"], [\"number\", \"\"], [1, \"lb-controlContainer\"], [1, \"lb-closeContainer\"], [1, \"lb-close\", 3, \"click\"], [1, \"lb-downloadContainer\", 3, \"hidden\"], [1, \"lb-download\", 3, \"click\"], [1, \"lb-turnContainer\", 3, \"hidden\"], [1, \"lb-turnLeft\", 3, \"click\"], [1, \"lb-turnRight\", 3, \"click\"], [1, \"lb-zoomContainer\", 3, \"hidden\"], [1, \"lb-zoomOut\", 3, \"click\"], [1, \"lb-zoomIn\", 3, \"click\"]],\n    template: function LightboxComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0, 1);\n        ɵngcc0.ɵɵelementStart(2, \"div\", 2, 3);\n        ɵngcc0.ɵɵelement(4, \"img\", 4, 5);\n        ɵngcc0.ɵɵelementStart(6, \"div\", 6, 7);\n        ɵngcc0.ɵɵelementStart(8, \"a\", 8, 9);\n        ɵngcc0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_8_listener() {\n          return ctx.prevImage();\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(10, \"a\", 10, 11);\n        ɵngcc0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_10_listener() {\n          return ctx.nextImage();\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(12, \"div\", 12);\n        ɵngcc0.ɵɵlistener(\"click\", function LightboxComponent_Template_div_click_12_listener($event) {\n          return ctx.close($event);\n        });\n        ɵngcc0.ɵɵelement(13, \"a\", 13);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(14, \"div\", 14, 15);\n        ɵngcc0.ɵɵelementStart(16, \"div\", 16);\n        ɵngcc0.ɵɵelementStart(17, \"div\", 17);\n        ɵngcc0.ɵɵelement(18, \"span\", 18, 19);\n        ɵngcc0.ɵɵelementStart(20, \"span\", 20, 21);\n        ɵngcc0.ɵɵtext(22);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(23, \"div\", 22);\n        ɵngcc0.ɵɵelementStart(24, \"div\", 23);\n        ɵngcc0.ɵɵelementStart(25, \"a\", 24);\n        ɵngcc0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_25_listener($event) {\n          return ctx.close($event);\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(26, \"div\", 25);\n        ɵngcc0.ɵɵelementStart(27, \"a\", 26);\n        ɵngcc0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_27_listener($event) {\n          return ctx.download($event);\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(28, \"div\", 27);\n        ɵngcc0.ɵɵelementStart(29, \"a\", 28);\n        ɵngcc0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_29_listener($event) {\n          return ctx.control($event);\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(30, \"a\", 29);\n        ɵngcc0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_30_listener($event) {\n          return ctx.control($event);\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(31, \"div\", 30);\n        ɵngcc0.ɵɵelementStart(32, \"a\", 31);\n        ɵngcc0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_32_listener($event) {\n          return ctx.control($event);\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(33, \"a\", 32);\n        ɵngcc0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_33_listener($event) {\n          return ctx.control($event);\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"src\", ctx.album[ctx.currentImageIndex].src, ɵngcc0.ɵɵsanitizeUrl)(\"hidden\", ctx.ui.showReloader);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"hidden\", !ctx.ui.showArrowNav);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"hidden\", !ctx.ui.showLeftArrow);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"hidden\", !ctx.ui.showRightArrow);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"hidden\", !ctx.ui.showReloader);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"hidden\", ctx.ui.showReloader);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"hidden\", !ctx.ui.showCaption)(\"innerHtml\", ctx.album[ctx.currentImageIndex].caption, ɵngcc0.ɵɵsanitizeHtml);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"hidden\", !ctx.ui.showPageNumber);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ctx.content.pageNumber);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"hidden\", !ctx.ui.showDownloadButton);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"hidden\", !ctx.ui.showRotateButton);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"hidden\", !ctx.ui.showZoomButton);\n      }\n    },\n    encapsulation: 2\n  });\n\n  (function () {\n    (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n  })();\n\n  return LightboxComponent;\n}();\n\nexports.LightboxComponent = LightboxComponent; //# sourceMappingURL=lightbox.component.js.map","map":null,"metadata":{},"sourceType":"script"}